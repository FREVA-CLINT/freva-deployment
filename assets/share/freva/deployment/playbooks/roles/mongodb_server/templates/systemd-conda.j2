[Unit]
Description=Freva mongoDB server
After=network.target

[Service]
Type=simple
ProtectSystem=full
PermissionsStartOnly=true
NoNewPrivileges=true
ProtectHome=true
KillSignal=SIGTERM
ExecStartPre=/bin/sh -c "rm -fr /tmp/mongo*"
ExecStart={{ conda_path }}/bin/start-freva-service -s mongo
EnvironmentFile={{ data_dir }}/config/service.env
Environment="PATH={{conda_path}}/bin:{{ ansible_env.PATH }}"
StandardOutput=journal
StandardError=journal
Restart=on-failure
RestartSec=5
StartLimitBurst=5
UMask=007
User={{ uid }}
Group={{ gid }}
[Install]
WantedBy=multi-user.target
